<!DOCTYPE html>
<html>
<head>
  <title>Device Settings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:,">
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div class="topnav">
  <h1>Device Settings</h1>
</div>
<div class="content">
  <div class="card-grid">
    <div class="card">
      <div class="settings">
        <form action="/" method="POST">
          <h2>
            General
          </h2>
          <div class="twocolumns">
            <div class="setting_box">
              <label for="Device Name">Device Name</label>
            </div>
            <div class="setting_box">
              <input type="text" id ="Device Name" name="Device Name" value=""><br>
            </div>
          </div> 
          <br><br>

          <h2>
            Network
          </h2>

          <div class="twocolumns">
            <div class="setting_box">
              <label for="ssid">Wifi Name</label>
            </div>
            <div class="setting_box">
              <input type="text" id ="ssid" name="ssid"><br>
            </div>
          </div>

          <div class="twocolumns">
            <div class="setting_box">
              <label for="pass">Password</label>
            </div>
            <div class="setting_box">
              <input type="text" id ="pass" name="pass"><br>
            </div>
          </div>

          <div class="twocolumns">
            <div class="setting_box">
              <label for="ip">IP Address</label>
            </div>
            <div class="setting_box">
              <input type="text" id ="ip" name="ip"><br>
            </div>
          </div>

          <div class="twocolumns">
            <div class="setting_box">
              <label for="gateway">Gateway Address</label>
            </div>
            <div class="setting_box">
              <input type="text" id ="gateway" name="gateway"><br>
            </div>
          </div>
      
          <input type ="submit" value ="Submit">
          <br><br><br>

          <hr width=auto />
        </form>

          <h2>
            Advanced
          </h2>
         
          <div class="twocolumns">
            <div>
              <label for="auto updates">Automatic Updates</label>
            </div>
            <div class = "setting_box">
              <label class="switch">
                <input type="checkbox" id="auto updates">
                <span class="slider round"></span>
              </label>
            </div>
          </div> 
          <br>

          <button onclick=checkForUpdates()>
            Check for Updates
          </button>
          <br><br>

          <div class="twocolumns">
            <div class="setting_box">
              <label for="specific FW">Install Firmware Version:</label>
            </div>
            <div class="setting_box">
              <input type="text" id ="specific FW" name="specific FW" value="" width="10px">
            </div>
            <div>
              <button onclick=installFW()>
                Install
            </button>
            </div>
          </div>
          <br><br>
      </div>
    </div>
  </div>
</div>

<script>

const response1 = fetch("/general-config")
  .then((x) => x.text())  
  .then((responseBody) => {
    const general_config = responseBody.split("\n")
    document.getElementById("Device Name").value = general_config[0]
  })


const response2 = fetch("/wifi-config")
  .then((x) => x.text())  
  .then((responseBody) => {
    const wifi_credentials = responseBody.split("\n")
    document.getElementById("ssid").value = wifi_credentials[0]
    document.getElementById("pass").value = wifi_credentials[1]
    document.getElementById("ip").value = wifi_credentials[2]
    document.getElementById("gateway").value = wifi_credentials[3]
  })

</script>

</body>
</html>
